// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`snapshot test: all alarms for ElasticsearchCfnDomain 1`] = `
Object {
  "Resources": Object {
    "ElasticsearchCfnDomain": Object {
      "Properties": Object {
        "DomainName": "ElasticsearchCfnDomain",
      },
      "Type": "AWS::Elasticsearch::Domain",
    },
    "ElasticsearchDomain54566C07": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "CognitoOptions": Object {
          "Enabled": false,
        },
        "DomainEndpointOptions": Object {
          "EnforceHTTPS": false,
          "TLSSecurityPolicy": "Policy-Min-TLS-1-0-2019-07",
        },
        "DomainName": "ElasticsearchDomain",
        "EBSOptions": Object {
          "EBSEnabled": true,
          "VolumeSize": 10,
          "VolumeType": "gp2",
        },
        "ElasticsearchClusterConfig": Object {
          "DedicatedMasterEnabled": false,
          "InstanceCount": 1,
          "InstanceType": "r5.large.elasticsearch",
          "ZoneAwarenessEnabled": false,
        },
        "ElasticsearchVersion": "7.7",
        "EncryptionAtRestOptions": Object {
          "Enabled": false,
        },
        "LogPublishingOptions": Object {},
        "NodeToNodeEncryptionOptions": Object {
          "Enabled": false,
        },
      },
      "Type": "AWS::Elasticsearch::Domain",
      "UpdateReplacePolicy": "Retain",
    },
    "OpenSearchCfnDomain": Object {
      "Properties": Object {
        "DomainName": "OpenSearchCfnDomain",
      },
      "Type": "AWS::OpenSearchService::Domain",
    },
    "OpenSearchDomain85D65221": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "ClusterConfig": Object {
          "DedicatedMasterEnabled": false,
          "InstanceCount": 1,
          "InstanceType": "r5.large.search",
          "ZoneAwarenessEnabled": false,
        },
        "CognitoOptions": Object {
          "Enabled": false,
        },
        "DomainEndpointOptions": Object {
          "EnforceHTTPS": false,
          "TLSSecurityPolicy": "Policy-Min-TLS-1-0-2019-07",
        },
        "DomainName": "OpenSearchDomain",
        "EBSOptions": Object {
          "EBSEnabled": true,
          "VolumeSize": 10,
          "VolumeType": "gp2",
        },
        "EncryptionAtRestOptions": Object {
          "Enabled": false,
        },
        "EngineVersion": "OpenSearch_1.0",
        "LogPublishingOptions": Object {},
        "NodeToNodeEncryptionOptions": Object {
          "Enabled": false,
        },
      },
      "Type": "AWS::OpenSearchService::Domain",
      "UpdateReplacePolicy": "Retain",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainCPUUsageWarning3F505546": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The CPU usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-CPU-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "CPU Usage",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "CPUUtilization",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterAutomatedSnapshotFailureWarningF2CE7D6D": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster automated snapshots are failing",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-AutomatedSnapshotFailure-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Automated Snapshot Failures",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "AutomatedSnapshotFailure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterClusterIndexWritesBlockedWarningC18EC120": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster writes are blocked",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-ClusterIndexWritesBlocked-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Index Writes Blocked",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterIndexWriteBlocked",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterClusterStatusCritical5F5B57FC": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster is in red status",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-ClusterStatus-Critical",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Red",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterStatus.red",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterClusterStatusWarning2F619B10": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster is in yellow status",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-ClusterStatus-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Yellow",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterStatus.yellow",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterKMSKeyErrorWarning01FB42D1": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster KMS keys are throwing errors",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-KMSKeyError-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "KMS Key Error",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "KMSKeyError",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterKMSKeyInaccessibleWarning4740A40D": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster KMS keys are inaccessible",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-KMSKeyInaccessible-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "KMS Key Inaccessible",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "KMSKeyInaccessible",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterNodesWarning6819B10A": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster node count is too low",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-Nodes-Warning",
        "ComparisonOperator": "LessThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Nodes",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "Nodes",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Minimum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainDiskUsageWarningAC0BBA9D": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The disk usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Disk-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Expression": "100 * (used/(used+free))",
            "Id": "expr_1",
            "Label": "Disk Usage",
          },
          Object {
            "Id": "used",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterUsedSpace",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Sum",
            },
            "ReturnData": false,
          },
          Object {
            "Id": "free",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "FreeStorageSpace",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Sum",
            },
            "ReturnData": false,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainIndexingLatencyP50Warning4629A5C1": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P50 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Indexing-Latency-P50-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 10,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P50",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p50",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 500,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainIndexingLatencyP90Warning2D4361B7": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P90 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Indexing-Latency-P90-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P90",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p90",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 600,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainIndexingLatencyP99Warning8A959843": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P99 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Indexing-Latency-P99-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P99",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p99",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 700,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainMasterCPUUsageWarning53AA8C84": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The master CPU usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Master-CPU-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Master CPU Usage",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "MasterCPUUtilization",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainMasterMemoryUsageWarning4A55B986": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The master memory usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Master-Memory-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Master JVM Memory Pressure",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "MasterJVMMemoryPressure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainMemoryUsageWarning361A5AB5": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The memory usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Memory-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "JVM Memory Pressure",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "JVMMemoryPressure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainSearchLatencyP50WarningD1217CC2": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P50 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Search-Latency-P50-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P50",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p50",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 500,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainSearchLatencyP90Warning7275DBE2": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P90 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Search-Latency-P90-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P90",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p90",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 600,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainSearchLatencyP99WarningCEDA6511": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P99 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Search-Latency-P99-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P99",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p99",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 700,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
  },
}
`;

exports[`snapshot test: all alarms for ElasticsearchDomain 1`] = `
Object {
  "Resources": Object {
    "ElasticsearchCfnDomain": Object {
      "Properties": Object {
        "DomainName": "ElasticsearchCfnDomain",
      },
      "Type": "AWS::Elasticsearch::Domain",
    },
    "ElasticsearchDomain54566C07": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "CognitoOptions": Object {
          "Enabled": false,
        },
        "DomainEndpointOptions": Object {
          "EnforceHTTPS": false,
          "TLSSecurityPolicy": "Policy-Min-TLS-1-0-2019-07",
        },
        "DomainName": "ElasticsearchDomain",
        "EBSOptions": Object {
          "EBSEnabled": true,
          "VolumeSize": 10,
          "VolumeType": "gp2",
        },
        "ElasticsearchClusterConfig": Object {
          "DedicatedMasterEnabled": false,
          "InstanceCount": 1,
          "InstanceType": "r5.large.elasticsearch",
          "ZoneAwarenessEnabled": false,
        },
        "ElasticsearchVersion": "7.7",
        "EncryptionAtRestOptions": Object {
          "Enabled": false,
        },
        "LogPublishingOptions": Object {},
        "NodeToNodeEncryptionOptions": Object {
          "Enabled": false,
        },
      },
      "Type": "AWS::Elasticsearch::Domain",
      "UpdateReplacePolicy": "Retain",
    },
    "OpenSearchCfnDomain": Object {
      "Properties": Object {
        "DomainName": "OpenSearchCfnDomain",
      },
      "Type": "AWS::OpenSearchService::Domain",
    },
    "OpenSearchDomain85D65221": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "ClusterConfig": Object {
          "DedicatedMasterEnabled": false,
          "InstanceCount": 1,
          "InstanceType": "r5.large.search",
          "ZoneAwarenessEnabled": false,
        },
        "CognitoOptions": Object {
          "Enabled": false,
        },
        "DomainEndpointOptions": Object {
          "EnforceHTTPS": false,
          "TLSSecurityPolicy": "Policy-Min-TLS-1-0-2019-07",
        },
        "DomainName": "OpenSearchDomain",
        "EBSOptions": Object {
          "EBSEnabled": true,
          "VolumeSize": 10,
          "VolumeType": "gp2",
        },
        "EncryptionAtRestOptions": Object {
          "Enabled": false,
        },
        "EngineVersion": "OpenSearch_1.0",
        "LogPublishingOptions": Object {},
        "NodeToNodeEncryptionOptions": Object {
          "Enabled": false,
        },
      },
      "Type": "AWS::OpenSearchService::Domain",
      "UpdateReplacePolicy": "Retain",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainCPUUsageWarning3F505546": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The CPU usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-CPU-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "CPU Usage",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "CPUUtilization",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterAutomatedSnapshotFailureWarningF2CE7D6D": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster automated snapshots are failing",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-AutomatedSnapshotFailure-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Automated Snapshot Failures",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "AutomatedSnapshotFailure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterClusterIndexWritesBlockedWarningC18EC120": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster writes are blocked",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-ClusterIndexWritesBlocked-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Index Writes Blocked",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterIndexWriteBlocked",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterClusterStatusCritical5F5B57FC": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster is in red status",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-ClusterStatus-Critical",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Red",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterStatus.red",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterClusterStatusWarning2F619B10": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster is in yellow status",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-ClusterStatus-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Yellow",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterStatus.yellow",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterKMSKeyErrorWarning01FB42D1": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster KMS keys are throwing errors",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-KMSKeyError-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "KMS Key Error",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "KMSKeyError",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterKMSKeyInaccessibleWarning4740A40D": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster KMS keys are inaccessible",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-KMSKeyInaccessible-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "KMS Key Inaccessible",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "KMSKeyInaccessible",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterNodesWarning6819B10A": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster node count is too low",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-Nodes-Warning",
        "ComparisonOperator": "LessThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Nodes",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "Nodes",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Minimum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainDiskUsageWarningAC0BBA9D": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The disk usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Disk-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Expression": "100 * (used/(used+free))",
            "Id": "expr_1",
            "Label": "Disk Usage",
          },
          Object {
            "Id": "used",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterUsedSpace",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Sum",
            },
            "ReturnData": false,
          },
          Object {
            "Id": "free",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "FreeStorageSpace",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Sum",
            },
            "ReturnData": false,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainIndexingLatencyP50Warning4629A5C1": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P50 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Indexing-Latency-P50-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 10,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P50",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p50",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 500,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainIndexingLatencyP90Warning2D4361B7": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P90 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Indexing-Latency-P90-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P90",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p90",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 600,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainIndexingLatencyP99Warning8A959843": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P99 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Indexing-Latency-P99-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P99",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p99",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 700,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainMasterCPUUsageWarning53AA8C84": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The master CPU usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Master-CPU-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Master CPU Usage",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "MasterCPUUtilization",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainMasterMemoryUsageWarning4A55B986": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The master memory usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Master-Memory-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Master JVM Memory Pressure",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "MasterJVMMemoryPressure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainMemoryUsageWarning361A5AB5": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The memory usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Memory-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "JVM Memory Pressure",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "JVMMemoryPressure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainSearchLatencyP50WarningD1217CC2": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P50 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Search-Latency-P50-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P50",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p50",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 500,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainSearchLatencyP90Warning7275DBE2": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P90 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Search-Latency-P90-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P90",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p90",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 600,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainSearchLatencyP99WarningCEDA6511": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P99 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Search-Latency-P99-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P99",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p99",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 700,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainCPUUsageWarning63505F51": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The CPU usage is too high.",
        "AlarmName": "Test-ElasticsearchDomain-CPU-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "CPU Usage",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "CPUUtilization",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterAutomatedSnapshotFailureWarningABA98F0A": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster automated snapshots are failing",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-AutomatedSnapshotFailure-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Automated Snapshot Failures",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "AutomatedSnapshotFailure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterClusterIndexWritesBlockedWarning094581FA": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster writes are blocked",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-ClusterIndexWritesBlocked-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Index Writes Blocked",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "ClusterIndexWriteBlocked",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterClusterStatusCriticalDB1ECD0F": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster is in red status",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-ClusterStatus-Critical",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Red",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "ClusterStatus.red",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterClusterStatusWarningEF9717EB": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster is in yellow status",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-ClusterStatus-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Yellow",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "ClusterStatus.yellow",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterKMSKeyErrorWarning36F7FED3": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster KMS keys are throwing errors",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-KMSKeyError-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "KMS Key Error",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "KMSKeyError",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterKMSKeyInaccessibleWarningB8CECCEC": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster KMS keys are inaccessible",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-KMSKeyInaccessible-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "KMS Key Inaccessible",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "KMSKeyInaccessible",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterNodesWarningEF4351DC": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster node count is too low",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-Nodes-Warning",
        "ComparisonOperator": "LessThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Nodes",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "Nodes",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Minimum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainDiskUsageWarning92263379": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The disk usage is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Disk-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Expression": "100 * (used/(used+free))",
            "Id": "expr_1",
            "Label": "Disk Usage",
          },
          Object {
            "Id": "used",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "ClusterUsedSpace",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Sum",
            },
            "ReturnData": false,
          },
          Object {
            "Id": "free",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "FreeStorageSpace",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Sum",
            },
            "ReturnData": false,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainIndexingLatencyP50Warning3E2E0FB5": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P50 latency is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Indexing-Latency-P50-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 10,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P50",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p50",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 500,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainIndexingLatencyP90Warning7FD7AA70": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P90 latency is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Indexing-Latency-P90-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P90",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p90",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 600,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainIndexingLatencyP99Warning503BE88C": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P99 latency is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Indexing-Latency-P99-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P99",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p99",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 700,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainMasterCPUUsageWarning48384FF1": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The master CPU usage is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Master-CPU-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Master CPU Usage",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "MasterCPUUtilization",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainMasterMemoryUsageWarning63F270E0": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The master memory usage is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Master-Memory-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Master JVM Memory Pressure",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "MasterJVMMemoryPressure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainMemoryUsageWarning9FFB6169": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The memory usage is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Memory-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "JVM Memory Pressure",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "JVMMemoryPressure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainSearchLatencyP50WarningDF00279F": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P50 latency is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Search-Latency-P50-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P50",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p50",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 500,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainSearchLatencyP90WarningE168C209": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P90 latency is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Search-Latency-P90-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P90",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p90",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 600,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainSearchLatencyP99Warning537E3AF4": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P99 latency is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Search-Latency-P99-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P99",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p99",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 700,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
  },
}
`;

exports[`snapshot test: all alarms for OpenSearchCfnDomain 1`] = `
Object {
  "Resources": Object {
    "ElasticsearchCfnDomain": Object {
      "Properties": Object {
        "DomainName": "ElasticsearchCfnDomain",
      },
      "Type": "AWS::Elasticsearch::Domain",
    },
    "ElasticsearchDomain54566C07": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "CognitoOptions": Object {
          "Enabled": false,
        },
        "DomainEndpointOptions": Object {
          "EnforceHTTPS": false,
          "TLSSecurityPolicy": "Policy-Min-TLS-1-0-2019-07",
        },
        "DomainName": "ElasticsearchDomain",
        "EBSOptions": Object {
          "EBSEnabled": true,
          "VolumeSize": 10,
          "VolumeType": "gp2",
        },
        "ElasticsearchClusterConfig": Object {
          "DedicatedMasterEnabled": false,
          "InstanceCount": 1,
          "InstanceType": "r5.large.elasticsearch",
          "ZoneAwarenessEnabled": false,
        },
        "ElasticsearchVersion": "7.7",
        "EncryptionAtRestOptions": Object {
          "Enabled": false,
        },
        "LogPublishingOptions": Object {},
        "NodeToNodeEncryptionOptions": Object {
          "Enabled": false,
        },
      },
      "Type": "AWS::Elasticsearch::Domain",
      "UpdateReplacePolicy": "Retain",
    },
    "OpenSearchCfnDomain": Object {
      "Properties": Object {
        "DomainName": "OpenSearchCfnDomain",
      },
      "Type": "AWS::OpenSearchService::Domain",
    },
    "OpenSearchDomain85D65221": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "ClusterConfig": Object {
          "DedicatedMasterEnabled": false,
          "InstanceCount": 1,
          "InstanceType": "r5.large.search",
          "ZoneAwarenessEnabled": false,
        },
        "CognitoOptions": Object {
          "Enabled": false,
        },
        "DomainEndpointOptions": Object {
          "EnforceHTTPS": false,
          "TLSSecurityPolicy": "Policy-Min-TLS-1-0-2019-07",
        },
        "DomainName": "OpenSearchDomain",
        "EBSOptions": Object {
          "EBSEnabled": true,
          "VolumeSize": 10,
          "VolumeType": "gp2",
        },
        "EncryptionAtRestOptions": Object {
          "Enabled": false,
        },
        "EngineVersion": "OpenSearch_1.0",
        "LogPublishingOptions": Object {},
        "NodeToNodeEncryptionOptions": Object {
          "Enabled": false,
        },
      },
      "Type": "AWS::OpenSearchService::Domain",
      "UpdateReplacePolicy": "Retain",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainCPUUsageWarning3F505546": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The CPU usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-CPU-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "CPU Usage",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "CPUUtilization",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterAutomatedSnapshotFailureWarningF2CE7D6D": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster automated snapshots are failing",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-AutomatedSnapshotFailure-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Automated Snapshot Failures",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "AutomatedSnapshotFailure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterClusterIndexWritesBlockedWarningC18EC120": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster writes are blocked",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-ClusterIndexWritesBlocked-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Index Writes Blocked",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterIndexWriteBlocked",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterClusterStatusCritical5F5B57FC": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster is in red status",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-ClusterStatus-Critical",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Red",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterStatus.red",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterClusterStatusWarning2F619B10": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster is in yellow status",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-ClusterStatus-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Yellow",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterStatus.yellow",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterKMSKeyErrorWarning01FB42D1": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster KMS keys are throwing errors",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-KMSKeyError-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "KMS Key Error",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "KMSKeyError",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterKMSKeyInaccessibleWarning4740A40D": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster KMS keys are inaccessible",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-KMSKeyInaccessible-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "KMS Key Inaccessible",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "KMSKeyInaccessible",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterNodesWarning6819B10A": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster node count is too low",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-Nodes-Warning",
        "ComparisonOperator": "LessThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Nodes",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "Nodes",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Minimum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainDiskUsageWarningAC0BBA9D": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The disk usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Disk-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Expression": "100 * (used/(used+free))",
            "Id": "expr_1",
            "Label": "Disk Usage",
          },
          Object {
            "Id": "used",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterUsedSpace",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Sum",
            },
            "ReturnData": false,
          },
          Object {
            "Id": "free",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "FreeStorageSpace",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Sum",
            },
            "ReturnData": false,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainIndexingLatencyP50Warning4629A5C1": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P50 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Indexing-Latency-P50-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 10,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P50",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p50",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 500,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainIndexingLatencyP90Warning2D4361B7": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P90 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Indexing-Latency-P90-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P90",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p90",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 600,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainIndexingLatencyP99Warning8A959843": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P99 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Indexing-Latency-P99-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P99",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p99",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 700,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainMasterCPUUsageWarning53AA8C84": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The master CPU usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Master-CPU-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Master CPU Usage",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "MasterCPUUtilization",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainMasterMemoryUsageWarning4A55B986": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The master memory usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Master-Memory-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Master JVM Memory Pressure",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "MasterJVMMemoryPressure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainMemoryUsageWarning361A5AB5": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The memory usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Memory-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "JVM Memory Pressure",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "JVMMemoryPressure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainSearchLatencyP50WarningD1217CC2": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P50 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Search-Latency-P50-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P50",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p50",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 500,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainSearchLatencyP90Warning7275DBE2": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P90 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Search-Latency-P90-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P90",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p90",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 600,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainSearchLatencyP99WarningCEDA6511": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P99 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Search-Latency-P99-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P99",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p99",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 700,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainCPUUsageWarning63505F51": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The CPU usage is too high.",
        "AlarmName": "Test-ElasticsearchDomain-CPU-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "CPU Usage",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "CPUUtilization",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterAutomatedSnapshotFailureWarningABA98F0A": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster automated snapshots are failing",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-AutomatedSnapshotFailure-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Automated Snapshot Failures",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "AutomatedSnapshotFailure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterClusterIndexWritesBlockedWarning094581FA": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster writes are blocked",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-ClusterIndexWritesBlocked-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Index Writes Blocked",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "ClusterIndexWriteBlocked",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterClusterStatusCriticalDB1ECD0F": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster is in red status",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-ClusterStatus-Critical",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Red",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "ClusterStatus.red",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterClusterStatusWarningEF9717EB": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster is in yellow status",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-ClusterStatus-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Yellow",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "ClusterStatus.yellow",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterKMSKeyErrorWarning36F7FED3": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster KMS keys are throwing errors",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-KMSKeyError-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "KMS Key Error",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "KMSKeyError",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterKMSKeyInaccessibleWarningB8CECCEC": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster KMS keys are inaccessible",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-KMSKeyInaccessible-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "KMS Key Inaccessible",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "KMSKeyInaccessible",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterNodesWarningEF4351DC": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster node count is too low",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-Nodes-Warning",
        "ComparisonOperator": "LessThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Nodes",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "Nodes",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Minimum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainDiskUsageWarning92263379": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The disk usage is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Disk-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Expression": "100 * (used/(used+free))",
            "Id": "expr_1",
            "Label": "Disk Usage",
          },
          Object {
            "Id": "used",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "ClusterUsedSpace",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Sum",
            },
            "ReturnData": false,
          },
          Object {
            "Id": "free",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "FreeStorageSpace",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Sum",
            },
            "ReturnData": false,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainIndexingLatencyP50Warning3E2E0FB5": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P50 latency is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Indexing-Latency-P50-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 10,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P50",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p50",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 500,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainIndexingLatencyP90Warning7FD7AA70": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P90 latency is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Indexing-Latency-P90-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P90",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p90",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 600,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainIndexingLatencyP99Warning503BE88C": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P99 latency is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Indexing-Latency-P99-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P99",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p99",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 700,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainMasterCPUUsageWarning48384FF1": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The master CPU usage is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Master-CPU-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Master CPU Usage",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "MasterCPUUtilization",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainMasterMemoryUsageWarning63F270E0": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The master memory usage is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Master-Memory-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Master JVM Memory Pressure",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "MasterJVMMemoryPressure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainMemoryUsageWarning9FFB6169": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The memory usage is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Memory-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "JVM Memory Pressure",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "JVMMemoryPressure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainSearchLatencyP50WarningDF00279F": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P50 latency is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Search-Latency-P50-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P50",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p50",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 500,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainSearchLatencyP90WarningE168C209": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P90 latency is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Search-Latency-P90-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P90",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p90",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 600,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainSearchLatencyP99Warning537E3AF4": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P99 latency is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Search-Latency-P99-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P99",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p99",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 700,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainCPUUsageWarning94256006": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The CPU usage is too high.",
        "AlarmName": "Test-OpenSearchCfnDomain-CPU-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "CPU Usage",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "CPUUtilization",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainClusterAutomatedSnapshotFailureWarning1DCD0EA2": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster automated snapshots are failing",
        "AlarmName": "Test-OpenSearchCfnDomain-Cluster-AutomatedSnapshotFailure-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Automated Snapshot Failures",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "AutomatedSnapshotFailure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainClusterClusterIndexWritesBlockedWarning65B2AB5B": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster writes are blocked",
        "AlarmName": "Test-OpenSearchCfnDomain-Cluster-ClusterIndexWritesBlocked-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Index Writes Blocked",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterIndexWriteBlocked",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainClusterClusterStatusCritical059C064E": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster is in red status",
        "AlarmName": "Test-OpenSearchCfnDomain-Cluster-ClusterStatus-Critical",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Red",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterStatus.red",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainClusterClusterStatusWarning09D70514": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster is in yellow status",
        "AlarmName": "Test-OpenSearchCfnDomain-Cluster-ClusterStatus-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Yellow",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterStatus.yellow",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainClusterKMSKeyErrorWarning1808FF19": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster KMS keys are throwing errors",
        "AlarmName": "Test-OpenSearchCfnDomain-Cluster-KMSKeyError-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "KMS Key Error",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "KMSKeyError",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainClusterKMSKeyInaccessibleWarning8E2DC83F": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster KMS keys are inaccessible",
        "AlarmName": "Test-OpenSearchCfnDomain-Cluster-KMSKeyInaccessible-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "KMS Key Inaccessible",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "KMSKeyInaccessible",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainClusterNodesWarning37FD30F7": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster node count is too low",
        "AlarmName": "Test-OpenSearchCfnDomain-Cluster-Nodes-Warning",
        "ComparisonOperator": "LessThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Nodes",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "Nodes",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Minimum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainDiskUsageWarningD082AB81": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The disk usage is too high.",
        "AlarmName": "Test-OpenSearchCfnDomain-Disk-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Expression": "100 * (used/(used+free))",
            "Id": "expr_1",
            "Label": "Disk Usage",
          },
          Object {
            "Id": "used",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterUsedSpace",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Sum",
            },
            "ReturnData": false,
          },
          Object {
            "Id": "free",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "FreeStorageSpace",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Sum",
            },
            "ReturnData": false,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainIndexingLatencyP50Warning888D3E68": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P50 latency is too high.",
        "AlarmName": "Test-OpenSearchCfnDomain-Indexing-Latency-P50-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 10,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P50",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p50",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 500,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainIndexingLatencyP90WarningB9242B4F": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P90 latency is too high.",
        "AlarmName": "Test-OpenSearchCfnDomain-Indexing-Latency-P90-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P90",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p90",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 600,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainIndexingLatencyP99WarningA5B0056B": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P99 latency is too high.",
        "AlarmName": "Test-OpenSearchCfnDomain-Indexing-Latency-P99-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P99",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p99",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 700,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainMasterCPUUsageWarningE70151EA": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The master CPU usage is too high.",
        "AlarmName": "Test-OpenSearchCfnDomain-Master-CPU-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Master CPU Usage",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "MasterCPUUtilization",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainMasterMemoryUsageWarning3E9CC2E9": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The master memory usage is too high.",
        "AlarmName": "Test-OpenSearchCfnDomain-Master-Memory-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Master JVM Memory Pressure",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "MasterJVMMemoryPressure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainMemoryUsageWarning8BDAC219": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The memory usage is too high.",
        "AlarmName": "Test-OpenSearchCfnDomain-Memory-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "JVM Memory Pressure",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "JVMMemoryPressure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainSearchLatencyP50WarningEE56A5F5": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P50 latency is too high.",
        "AlarmName": "Test-OpenSearchCfnDomain-Search-Latency-P50-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P50",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p50",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 500,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainSearchLatencyP90Warning1FF93CA1": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P90 latency is too high.",
        "AlarmName": "Test-OpenSearchCfnDomain-Search-Latency-P90-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P90",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p90",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 600,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainSearchLatencyP99Warning2E9978CD": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P99 latency is too high.",
        "AlarmName": "Test-OpenSearchCfnDomain-Search-Latency-P99-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P99",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p99",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 700,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
  },
}
`;

exports[`snapshot test: all alarms for OpenSearchDomain 1`] = `
Object {
  "Resources": Object {
    "ElasticsearchCfnDomain": Object {
      "Properties": Object {
        "DomainName": "ElasticsearchCfnDomain",
      },
      "Type": "AWS::Elasticsearch::Domain",
    },
    "ElasticsearchDomain54566C07": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "CognitoOptions": Object {
          "Enabled": false,
        },
        "DomainEndpointOptions": Object {
          "EnforceHTTPS": false,
          "TLSSecurityPolicy": "Policy-Min-TLS-1-0-2019-07",
        },
        "DomainName": "ElasticsearchDomain",
        "EBSOptions": Object {
          "EBSEnabled": true,
          "VolumeSize": 10,
          "VolumeType": "gp2",
        },
        "ElasticsearchClusterConfig": Object {
          "DedicatedMasterEnabled": false,
          "InstanceCount": 1,
          "InstanceType": "r5.large.elasticsearch",
          "ZoneAwarenessEnabled": false,
        },
        "ElasticsearchVersion": "7.7",
        "EncryptionAtRestOptions": Object {
          "Enabled": false,
        },
        "LogPublishingOptions": Object {},
        "NodeToNodeEncryptionOptions": Object {
          "Enabled": false,
        },
      },
      "Type": "AWS::Elasticsearch::Domain",
      "UpdateReplacePolicy": "Retain",
    },
    "OpenSearchCfnDomain": Object {
      "Properties": Object {
        "DomainName": "OpenSearchCfnDomain",
      },
      "Type": "AWS::OpenSearchService::Domain",
    },
    "OpenSearchDomain85D65221": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "ClusterConfig": Object {
          "DedicatedMasterEnabled": false,
          "InstanceCount": 1,
          "InstanceType": "r5.large.search",
          "ZoneAwarenessEnabled": false,
        },
        "CognitoOptions": Object {
          "Enabled": false,
        },
        "DomainEndpointOptions": Object {
          "EnforceHTTPS": false,
          "TLSSecurityPolicy": "Policy-Min-TLS-1-0-2019-07",
        },
        "DomainName": "OpenSearchDomain",
        "EBSOptions": Object {
          "EBSEnabled": true,
          "VolumeSize": 10,
          "VolumeType": "gp2",
        },
        "EncryptionAtRestOptions": Object {
          "Enabled": false,
        },
        "EngineVersion": "OpenSearch_1.0",
        "LogPublishingOptions": Object {},
        "NodeToNodeEncryptionOptions": Object {
          "Enabled": false,
        },
      },
      "Type": "AWS::OpenSearchService::Domain",
      "UpdateReplacePolicy": "Retain",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainCPUUsageWarning3F505546": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The CPU usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-CPU-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "CPU Usage",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "CPUUtilization",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterAutomatedSnapshotFailureWarningF2CE7D6D": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster automated snapshots are failing",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-AutomatedSnapshotFailure-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Automated Snapshot Failures",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "AutomatedSnapshotFailure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterClusterIndexWritesBlockedWarningC18EC120": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster writes are blocked",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-ClusterIndexWritesBlocked-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Index Writes Blocked",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterIndexWriteBlocked",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterClusterStatusCritical5F5B57FC": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster is in red status",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-ClusterStatus-Critical",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Red",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterStatus.red",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterClusterStatusWarning2F619B10": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster is in yellow status",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-ClusterStatus-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Yellow",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterStatus.yellow",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterKMSKeyErrorWarning01FB42D1": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster KMS keys are throwing errors",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-KMSKeyError-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "KMS Key Error",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "KMSKeyError",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterKMSKeyInaccessibleWarning4740A40D": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster KMS keys are inaccessible",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-KMSKeyInaccessible-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "KMS Key Inaccessible",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "KMSKeyInaccessible",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterNodesWarning6819B10A": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster node count is too low",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-Nodes-Warning",
        "ComparisonOperator": "LessThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Nodes",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "Nodes",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Minimum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainDiskUsageWarningAC0BBA9D": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The disk usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Disk-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Expression": "100 * (used/(used+free))",
            "Id": "expr_1",
            "Label": "Disk Usage",
          },
          Object {
            "Id": "used",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterUsedSpace",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Sum",
            },
            "ReturnData": false,
          },
          Object {
            "Id": "free",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "FreeStorageSpace",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Sum",
            },
            "ReturnData": false,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainIndexingLatencyP50Warning4629A5C1": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P50 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Indexing-Latency-P50-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 10,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P50",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p50",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 500,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainIndexingLatencyP90Warning2D4361B7": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P90 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Indexing-Latency-P90-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P90",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p90",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 600,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainIndexingLatencyP99Warning8A959843": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P99 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Indexing-Latency-P99-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P99",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p99",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 700,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainMasterCPUUsageWarning53AA8C84": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The master CPU usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Master-CPU-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Master CPU Usage",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "MasterCPUUtilization",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainMasterMemoryUsageWarning4A55B986": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The master memory usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Master-Memory-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Master JVM Memory Pressure",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "MasterJVMMemoryPressure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainMemoryUsageWarning361A5AB5": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The memory usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Memory-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "JVM Memory Pressure",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "JVMMemoryPressure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainSearchLatencyP50WarningD1217CC2": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P50 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Search-Latency-P50-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P50",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p50",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 500,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainSearchLatencyP90Warning7275DBE2": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P90 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Search-Latency-P90-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P90",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p90",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 600,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainSearchLatencyP99WarningCEDA6511": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P99 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Search-Latency-P99-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P99",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p99",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 700,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainCPUUsageWarning63505F51": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The CPU usage is too high.",
        "AlarmName": "Test-ElasticsearchDomain-CPU-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "CPU Usage",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "CPUUtilization",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterAutomatedSnapshotFailureWarningABA98F0A": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster automated snapshots are failing",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-AutomatedSnapshotFailure-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Automated Snapshot Failures",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "AutomatedSnapshotFailure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterClusterIndexWritesBlockedWarning094581FA": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster writes are blocked",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-ClusterIndexWritesBlocked-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Index Writes Blocked",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "ClusterIndexWriteBlocked",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterClusterStatusCriticalDB1ECD0F": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster is in red status",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-ClusterStatus-Critical",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Red",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "ClusterStatus.red",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterClusterStatusWarningEF9717EB": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster is in yellow status",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-ClusterStatus-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Yellow",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "ClusterStatus.yellow",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterKMSKeyErrorWarning36F7FED3": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster KMS keys are throwing errors",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-KMSKeyError-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "KMS Key Error",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "KMSKeyError",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterKMSKeyInaccessibleWarningB8CECCEC": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster KMS keys are inaccessible",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-KMSKeyInaccessible-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "KMS Key Inaccessible",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "KMSKeyInaccessible",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterNodesWarningEF4351DC": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster node count is too low",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-Nodes-Warning",
        "ComparisonOperator": "LessThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Nodes",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "Nodes",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Minimum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainDiskUsageWarning92263379": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The disk usage is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Disk-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Expression": "100 * (used/(used+free))",
            "Id": "expr_1",
            "Label": "Disk Usage",
          },
          Object {
            "Id": "used",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "ClusterUsedSpace",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Sum",
            },
            "ReturnData": false,
          },
          Object {
            "Id": "free",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "FreeStorageSpace",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Sum",
            },
            "ReturnData": false,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainIndexingLatencyP50Warning3E2E0FB5": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P50 latency is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Indexing-Latency-P50-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 10,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P50",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p50",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 500,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainIndexingLatencyP90Warning7FD7AA70": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P90 latency is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Indexing-Latency-P90-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P90",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p90",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 600,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainIndexingLatencyP99Warning503BE88C": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P99 latency is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Indexing-Latency-P99-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P99",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p99",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 700,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainMasterCPUUsageWarning48384FF1": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The master CPU usage is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Master-CPU-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Master CPU Usage",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "MasterCPUUtilization",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainMasterMemoryUsageWarning63F270E0": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The master memory usage is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Master-Memory-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Master JVM Memory Pressure",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "MasterJVMMemoryPressure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainMemoryUsageWarning9FFB6169": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The memory usage is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Memory-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "JVM Memory Pressure",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "JVMMemoryPressure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainSearchLatencyP50WarningDF00279F": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P50 latency is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Search-Latency-P50-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P50",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p50",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 500,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainSearchLatencyP90WarningE168C209": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P90 latency is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Search-Latency-P90-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P90",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p90",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 600,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainSearchLatencyP99Warning537E3AF4": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P99 latency is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Search-Latency-P99-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P99",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p99",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 700,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainCPUUsageWarning94256006": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The CPU usage is too high.",
        "AlarmName": "Test-OpenSearchCfnDomain-CPU-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "CPU Usage",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "CPUUtilization",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainClusterAutomatedSnapshotFailureWarning1DCD0EA2": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster automated snapshots are failing",
        "AlarmName": "Test-OpenSearchCfnDomain-Cluster-AutomatedSnapshotFailure-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Automated Snapshot Failures",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "AutomatedSnapshotFailure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainClusterClusterIndexWritesBlockedWarning65B2AB5B": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster writes are blocked",
        "AlarmName": "Test-OpenSearchCfnDomain-Cluster-ClusterIndexWritesBlocked-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Index Writes Blocked",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterIndexWriteBlocked",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainClusterClusterStatusCritical059C064E": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster is in red status",
        "AlarmName": "Test-OpenSearchCfnDomain-Cluster-ClusterStatus-Critical",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Red",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterStatus.red",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainClusterClusterStatusWarning09D70514": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster is in yellow status",
        "AlarmName": "Test-OpenSearchCfnDomain-Cluster-ClusterStatus-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Yellow",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterStatus.yellow",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainClusterKMSKeyErrorWarning1808FF19": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster KMS keys are throwing errors",
        "AlarmName": "Test-OpenSearchCfnDomain-Cluster-KMSKeyError-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "KMS Key Error",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "KMSKeyError",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainClusterKMSKeyInaccessibleWarning8E2DC83F": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster KMS keys are inaccessible",
        "AlarmName": "Test-OpenSearchCfnDomain-Cluster-KMSKeyInaccessible-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "KMS Key Inaccessible",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "KMSKeyInaccessible",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainClusterNodesWarning37FD30F7": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster node count is too low",
        "AlarmName": "Test-OpenSearchCfnDomain-Cluster-Nodes-Warning",
        "ComparisonOperator": "LessThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Nodes",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "Nodes",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Minimum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainDiskUsageWarningD082AB81": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The disk usage is too high.",
        "AlarmName": "Test-OpenSearchCfnDomain-Disk-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Expression": "100 * (used/(used+free))",
            "Id": "expr_1",
            "Label": "Disk Usage",
          },
          Object {
            "Id": "used",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterUsedSpace",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Sum",
            },
            "ReturnData": false,
          },
          Object {
            "Id": "free",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "FreeStorageSpace",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Sum",
            },
            "ReturnData": false,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainIndexingLatencyP50Warning888D3E68": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P50 latency is too high.",
        "AlarmName": "Test-OpenSearchCfnDomain-Indexing-Latency-P50-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 10,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P50",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p50",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 500,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainIndexingLatencyP90WarningB9242B4F": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P90 latency is too high.",
        "AlarmName": "Test-OpenSearchCfnDomain-Indexing-Latency-P90-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P90",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p90",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 600,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainIndexingLatencyP99WarningA5B0056B": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P99 latency is too high.",
        "AlarmName": "Test-OpenSearchCfnDomain-Indexing-Latency-P99-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P99",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p99",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 700,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainMasterCPUUsageWarningE70151EA": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The master CPU usage is too high.",
        "AlarmName": "Test-OpenSearchCfnDomain-Master-CPU-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Master CPU Usage",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "MasterCPUUtilization",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainMasterMemoryUsageWarning3E9CC2E9": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The master memory usage is too high.",
        "AlarmName": "Test-OpenSearchCfnDomain-Master-Memory-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Master JVM Memory Pressure",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "MasterJVMMemoryPressure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainMemoryUsageWarning8BDAC219": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The memory usage is too high.",
        "AlarmName": "Test-OpenSearchCfnDomain-Memory-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "JVM Memory Pressure",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "JVMMemoryPressure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainSearchLatencyP50WarningEE56A5F5": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P50 latency is too high.",
        "AlarmName": "Test-OpenSearchCfnDomain-Search-Latency-P50-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P50",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p50",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 500,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainSearchLatencyP90Warning1FF93CA1": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P90 latency is too high.",
        "AlarmName": "Test-OpenSearchCfnDomain-Search-Latency-P90-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P90",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p90",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 600,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainSearchLatencyP99Warning2E9978CD": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P99 latency is too high.",
        "AlarmName": "Test-OpenSearchCfnDomain-Search-Latency-P99-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P99",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p99",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 700,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchDomainTestOpenSearchDomainCPUUsageWarning2A67E224": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The CPU usage is too high.",
        "AlarmName": "Test-OpenSearchDomain-CPU-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "CPU Usage",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "OpenSearchDomain85D65221",
                    },
                  },
                ],
                "MetricName": "CPUUtilization",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchDomainTestOpenSearchDomainClusterAutomatedSnapshotFailureWarning37FB814C": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster automated snapshots are failing",
        "AlarmName": "Test-OpenSearchDomain-Cluster-AutomatedSnapshotFailure-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Automated Snapshot Failures",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "OpenSearchDomain85D65221",
                    },
                  },
                ],
                "MetricName": "AutomatedSnapshotFailure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchDomainTestOpenSearchDomainClusterClusterIndexWritesBlockedWarning097A920C": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster writes are blocked",
        "AlarmName": "Test-OpenSearchDomain-Cluster-ClusterIndexWritesBlocked-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Index Writes Blocked",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "OpenSearchDomain85D65221",
                    },
                  },
                ],
                "MetricName": "ClusterIndexWriteBlocked",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchDomainTestOpenSearchDomainClusterClusterStatusCriticalAC3D6FFF": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster is in red status",
        "AlarmName": "Test-OpenSearchDomain-Cluster-ClusterStatus-Critical",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Red",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "OpenSearchDomain85D65221",
                    },
                  },
                ],
                "MetricName": "ClusterStatus.red",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchDomainTestOpenSearchDomainClusterClusterStatusWarning9F88E499": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster is in yellow status",
        "AlarmName": "Test-OpenSearchDomain-Cluster-ClusterStatus-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Yellow",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "OpenSearchDomain85D65221",
                    },
                  },
                ],
                "MetricName": "ClusterStatus.yellow",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchDomainTestOpenSearchDomainClusterKMSKeyErrorWarning18ABD442": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster KMS keys are throwing errors",
        "AlarmName": "Test-OpenSearchDomain-Cluster-KMSKeyError-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "KMS Key Error",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "OpenSearchDomain85D65221",
                    },
                  },
                ],
                "MetricName": "KMSKeyError",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchDomainTestOpenSearchDomainClusterKMSKeyInaccessibleWarningCD58CF99": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster KMS keys are inaccessible",
        "AlarmName": "Test-OpenSearchDomain-Cluster-KMSKeyInaccessible-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "KMS Key Inaccessible",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "OpenSearchDomain85D65221",
                    },
                  },
                ],
                "MetricName": "KMSKeyInaccessible",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchDomainTestOpenSearchDomainClusterNodesWarningDB8FDD95": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster node count is too low",
        "AlarmName": "Test-OpenSearchDomain-Cluster-Nodes-Warning",
        "ComparisonOperator": "LessThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Nodes",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "OpenSearchDomain85D65221",
                    },
                  },
                ],
                "MetricName": "Nodes",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Minimum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchDomainTestOpenSearchDomainDiskUsageWarning83694D87": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The disk usage is too high.",
        "AlarmName": "Test-OpenSearchDomain-Disk-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Expression": "100 * (used/(used+free))",
            "Id": "expr_1",
            "Label": "Disk Usage",
          },
          Object {
            "Id": "used",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "OpenSearchDomain85D65221",
                    },
                  },
                ],
                "MetricName": "ClusterUsedSpace",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Sum",
            },
            "ReturnData": false,
          },
          Object {
            "Id": "free",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "OpenSearchDomain85D65221",
                    },
                  },
                ],
                "MetricName": "FreeStorageSpace",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Sum",
            },
            "ReturnData": false,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchDomainTestOpenSearchDomainIndexingLatencyP50WarningEEA8B927": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P50 latency is too high.",
        "AlarmName": "Test-OpenSearchDomain-Indexing-Latency-P50-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 10,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P50",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "OpenSearchDomain85D65221",
                    },
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p50",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 500,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchDomainTestOpenSearchDomainIndexingLatencyP90Warning308E25F5": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P90 latency is too high.",
        "AlarmName": "Test-OpenSearchDomain-Indexing-Latency-P90-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P90",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "OpenSearchDomain85D65221",
                    },
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p90",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 600,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchDomainTestOpenSearchDomainIndexingLatencyP99Warning6222D2FE": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P99 latency is too high.",
        "AlarmName": "Test-OpenSearchDomain-Indexing-Latency-P99-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P99",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "OpenSearchDomain85D65221",
                    },
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p99",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 700,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchDomainTestOpenSearchDomainMasterCPUUsageWarning79A1755C": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The master CPU usage is too high.",
        "AlarmName": "Test-OpenSearchDomain-Master-CPU-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Master CPU Usage",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "OpenSearchDomain85D65221",
                    },
                  },
                ],
                "MetricName": "MasterCPUUtilization",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchDomainTestOpenSearchDomainMasterMemoryUsageWarningA439A9E4": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The master memory usage is too high.",
        "AlarmName": "Test-OpenSearchDomain-Master-Memory-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Master JVM Memory Pressure",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "OpenSearchDomain85D65221",
                    },
                  },
                ],
                "MetricName": "MasterJVMMemoryPressure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchDomainTestOpenSearchDomainMemoryUsageWarningB6C5C833": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The memory usage is too high.",
        "AlarmName": "Test-OpenSearchDomain-Memory-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "JVM Memory Pressure",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "OpenSearchDomain85D65221",
                    },
                  },
                ],
                "MetricName": "JVMMemoryPressure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchDomainTestOpenSearchDomainSearchLatencyP50WarningF55FBBA1": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P50 latency is too high.",
        "AlarmName": "Test-OpenSearchDomain-Search-Latency-P50-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P50",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "OpenSearchDomain85D65221",
                    },
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p50",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 500,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchDomainTestOpenSearchDomainSearchLatencyP90Warning30257435": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P90 latency is too high.",
        "AlarmName": "Test-OpenSearchDomain-Search-Latency-P90-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P90",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "OpenSearchDomain85D65221",
                    },
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p90",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 600,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchDomainTestOpenSearchDomainSearchLatencyP99Warning9DFB8CA4": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P99 latency is too high.",
        "AlarmName": "Test-OpenSearchDomain-Search-Latency-P99-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P99",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "OpenSearchDomain85D65221",
                    },
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p99",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 700,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
  },
}
`;

exports[`snapshot test: no alarms for ElasticsearchCfnDomain 1`] = `
Object {
  "Resources": Object {
    "ElasticsearchCfnDomain": Object {
      "Properties": Object {
        "DomainName": "ElasticsearchCfnDomain",
      },
      "Type": "AWS::Elasticsearch::Domain",
    },
    "ElasticsearchDomain54566C07": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "CognitoOptions": Object {
          "Enabled": false,
        },
        "DomainEndpointOptions": Object {
          "EnforceHTTPS": false,
          "TLSSecurityPolicy": "Policy-Min-TLS-1-0-2019-07",
        },
        "DomainName": "ElasticsearchDomain",
        "EBSOptions": Object {
          "EBSEnabled": true,
          "VolumeSize": 10,
          "VolumeType": "gp2",
        },
        "ElasticsearchClusterConfig": Object {
          "DedicatedMasterEnabled": false,
          "InstanceCount": 1,
          "InstanceType": "r5.large.elasticsearch",
          "ZoneAwarenessEnabled": false,
        },
        "ElasticsearchVersion": "7.7",
        "EncryptionAtRestOptions": Object {
          "Enabled": false,
        },
        "LogPublishingOptions": Object {},
        "NodeToNodeEncryptionOptions": Object {
          "Enabled": false,
        },
      },
      "Type": "AWS::Elasticsearch::Domain",
      "UpdateReplacePolicy": "Retain",
    },
    "OpenSearchCfnDomain": Object {
      "Properties": Object {
        "DomainName": "OpenSearchCfnDomain",
      },
      "Type": "AWS::OpenSearchService::Domain",
    },
    "OpenSearchDomain85D65221": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "ClusterConfig": Object {
          "DedicatedMasterEnabled": false,
          "InstanceCount": 1,
          "InstanceType": "r5.large.search",
          "ZoneAwarenessEnabled": false,
        },
        "CognitoOptions": Object {
          "Enabled": false,
        },
        "DomainEndpointOptions": Object {
          "EnforceHTTPS": false,
          "TLSSecurityPolicy": "Policy-Min-TLS-1-0-2019-07",
        },
        "DomainName": "OpenSearchDomain",
        "EBSOptions": Object {
          "EBSEnabled": true,
          "VolumeSize": 10,
          "VolumeType": "gp2",
        },
        "EncryptionAtRestOptions": Object {
          "Enabled": false,
        },
        "EngineVersion": "OpenSearch_1.0",
        "LogPublishingOptions": Object {},
        "NodeToNodeEncryptionOptions": Object {
          "Enabled": false,
        },
      },
      "Type": "AWS::OpenSearchService::Domain",
      "UpdateReplacePolicy": "Retain",
    },
  },
}
`;

exports[`snapshot test: no alarms for ElasticsearchDomain 1`] = `
Object {
  "Resources": Object {
    "ElasticsearchCfnDomain": Object {
      "Properties": Object {
        "DomainName": "ElasticsearchCfnDomain",
      },
      "Type": "AWS::Elasticsearch::Domain",
    },
    "ElasticsearchDomain54566C07": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "CognitoOptions": Object {
          "Enabled": false,
        },
        "DomainEndpointOptions": Object {
          "EnforceHTTPS": false,
          "TLSSecurityPolicy": "Policy-Min-TLS-1-0-2019-07",
        },
        "DomainName": "ElasticsearchDomain",
        "EBSOptions": Object {
          "EBSEnabled": true,
          "VolumeSize": 10,
          "VolumeType": "gp2",
        },
        "ElasticsearchClusterConfig": Object {
          "DedicatedMasterEnabled": false,
          "InstanceCount": 1,
          "InstanceType": "r5.large.elasticsearch",
          "ZoneAwarenessEnabled": false,
        },
        "ElasticsearchVersion": "7.7",
        "EncryptionAtRestOptions": Object {
          "Enabled": false,
        },
        "LogPublishingOptions": Object {},
        "NodeToNodeEncryptionOptions": Object {
          "Enabled": false,
        },
      },
      "Type": "AWS::Elasticsearch::Domain",
      "UpdateReplacePolicy": "Retain",
    },
    "OpenSearchCfnDomain": Object {
      "Properties": Object {
        "DomainName": "OpenSearchCfnDomain",
      },
      "Type": "AWS::OpenSearchService::Domain",
    },
    "OpenSearchDomain85D65221": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "ClusterConfig": Object {
          "DedicatedMasterEnabled": false,
          "InstanceCount": 1,
          "InstanceType": "r5.large.search",
          "ZoneAwarenessEnabled": false,
        },
        "CognitoOptions": Object {
          "Enabled": false,
        },
        "DomainEndpointOptions": Object {
          "EnforceHTTPS": false,
          "TLSSecurityPolicy": "Policy-Min-TLS-1-0-2019-07",
        },
        "DomainName": "OpenSearchDomain",
        "EBSOptions": Object {
          "EBSEnabled": true,
          "VolumeSize": 10,
          "VolumeType": "gp2",
        },
        "EncryptionAtRestOptions": Object {
          "Enabled": false,
        },
        "EngineVersion": "OpenSearch_1.0",
        "LogPublishingOptions": Object {},
        "NodeToNodeEncryptionOptions": Object {
          "Enabled": false,
        },
      },
      "Type": "AWS::OpenSearchService::Domain",
      "UpdateReplacePolicy": "Retain",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainCPUUsageWarning3F505546": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The CPU usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-CPU-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "CPU Usage",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "CPUUtilization",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterAutomatedSnapshotFailureWarningF2CE7D6D": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster automated snapshots are failing",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-AutomatedSnapshotFailure-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Automated Snapshot Failures",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "AutomatedSnapshotFailure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterClusterIndexWritesBlockedWarningC18EC120": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster writes are blocked",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-ClusterIndexWritesBlocked-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Index Writes Blocked",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterIndexWriteBlocked",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterClusterStatusCritical5F5B57FC": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster is in red status",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-ClusterStatus-Critical",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Red",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterStatus.red",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterClusterStatusWarning2F619B10": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster is in yellow status",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-ClusterStatus-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Yellow",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterStatus.yellow",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterKMSKeyErrorWarning01FB42D1": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster KMS keys are throwing errors",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-KMSKeyError-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "KMS Key Error",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "KMSKeyError",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterKMSKeyInaccessibleWarning4740A40D": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster KMS keys are inaccessible",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-KMSKeyInaccessible-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "KMS Key Inaccessible",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "KMSKeyInaccessible",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterNodesWarning6819B10A": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster node count is too low",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-Nodes-Warning",
        "ComparisonOperator": "LessThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Nodes",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "Nodes",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Minimum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainDiskUsageWarningAC0BBA9D": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The disk usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Disk-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Expression": "100 * (used/(used+free))",
            "Id": "expr_1",
            "Label": "Disk Usage",
          },
          Object {
            "Id": "used",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterUsedSpace",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Sum",
            },
            "ReturnData": false,
          },
          Object {
            "Id": "free",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "FreeStorageSpace",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Sum",
            },
            "ReturnData": false,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainIndexingLatencyP50Warning4629A5C1": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P50 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Indexing-Latency-P50-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 10,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P50",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p50",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 500,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainIndexingLatencyP90Warning2D4361B7": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P90 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Indexing-Latency-P90-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P90",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p90",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 600,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainIndexingLatencyP99Warning8A959843": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P99 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Indexing-Latency-P99-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P99",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p99",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 700,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainMasterCPUUsageWarning53AA8C84": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The master CPU usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Master-CPU-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Master CPU Usage",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "MasterCPUUtilization",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainMasterMemoryUsageWarning4A55B986": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The master memory usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Master-Memory-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Master JVM Memory Pressure",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "MasterJVMMemoryPressure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainMemoryUsageWarning361A5AB5": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The memory usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Memory-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "JVM Memory Pressure",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "JVMMemoryPressure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainSearchLatencyP50WarningD1217CC2": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P50 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Search-Latency-P50-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P50",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p50",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 500,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainSearchLatencyP90Warning7275DBE2": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P90 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Search-Latency-P90-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P90",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p90",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 600,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainSearchLatencyP99WarningCEDA6511": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P99 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Search-Latency-P99-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P99",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p99",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 700,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
  },
}
`;

exports[`snapshot test: no alarms for OpenSearchCfnDomain 1`] = `
Object {
  "Resources": Object {
    "ElasticsearchCfnDomain": Object {
      "Properties": Object {
        "DomainName": "ElasticsearchCfnDomain",
      },
      "Type": "AWS::Elasticsearch::Domain",
    },
    "ElasticsearchDomain54566C07": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "CognitoOptions": Object {
          "Enabled": false,
        },
        "DomainEndpointOptions": Object {
          "EnforceHTTPS": false,
          "TLSSecurityPolicy": "Policy-Min-TLS-1-0-2019-07",
        },
        "DomainName": "ElasticsearchDomain",
        "EBSOptions": Object {
          "EBSEnabled": true,
          "VolumeSize": 10,
          "VolumeType": "gp2",
        },
        "ElasticsearchClusterConfig": Object {
          "DedicatedMasterEnabled": false,
          "InstanceCount": 1,
          "InstanceType": "r5.large.elasticsearch",
          "ZoneAwarenessEnabled": false,
        },
        "ElasticsearchVersion": "7.7",
        "EncryptionAtRestOptions": Object {
          "Enabled": false,
        },
        "LogPublishingOptions": Object {},
        "NodeToNodeEncryptionOptions": Object {
          "Enabled": false,
        },
      },
      "Type": "AWS::Elasticsearch::Domain",
      "UpdateReplacePolicy": "Retain",
    },
    "OpenSearchCfnDomain": Object {
      "Properties": Object {
        "DomainName": "OpenSearchCfnDomain",
      },
      "Type": "AWS::OpenSearchService::Domain",
    },
    "OpenSearchDomain85D65221": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "ClusterConfig": Object {
          "DedicatedMasterEnabled": false,
          "InstanceCount": 1,
          "InstanceType": "r5.large.search",
          "ZoneAwarenessEnabled": false,
        },
        "CognitoOptions": Object {
          "Enabled": false,
        },
        "DomainEndpointOptions": Object {
          "EnforceHTTPS": false,
          "TLSSecurityPolicy": "Policy-Min-TLS-1-0-2019-07",
        },
        "DomainName": "OpenSearchDomain",
        "EBSOptions": Object {
          "EBSEnabled": true,
          "VolumeSize": 10,
          "VolumeType": "gp2",
        },
        "EncryptionAtRestOptions": Object {
          "Enabled": false,
        },
        "EngineVersion": "OpenSearch_1.0",
        "LogPublishingOptions": Object {},
        "NodeToNodeEncryptionOptions": Object {
          "Enabled": false,
        },
      },
      "Type": "AWS::OpenSearchService::Domain",
      "UpdateReplacePolicy": "Retain",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainCPUUsageWarning3F505546": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The CPU usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-CPU-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "CPU Usage",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "CPUUtilization",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterAutomatedSnapshotFailureWarningF2CE7D6D": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster automated snapshots are failing",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-AutomatedSnapshotFailure-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Automated Snapshot Failures",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "AutomatedSnapshotFailure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterClusterIndexWritesBlockedWarningC18EC120": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster writes are blocked",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-ClusterIndexWritesBlocked-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Index Writes Blocked",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterIndexWriteBlocked",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterClusterStatusCritical5F5B57FC": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster is in red status",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-ClusterStatus-Critical",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Red",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterStatus.red",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterClusterStatusWarning2F619B10": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster is in yellow status",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-ClusterStatus-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Yellow",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterStatus.yellow",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterKMSKeyErrorWarning01FB42D1": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster KMS keys are throwing errors",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-KMSKeyError-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "KMS Key Error",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "KMSKeyError",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterKMSKeyInaccessibleWarning4740A40D": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster KMS keys are inaccessible",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-KMSKeyInaccessible-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "KMS Key Inaccessible",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "KMSKeyInaccessible",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterNodesWarning6819B10A": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster node count is too low",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-Nodes-Warning",
        "ComparisonOperator": "LessThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Nodes",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "Nodes",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Minimum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainDiskUsageWarningAC0BBA9D": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The disk usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Disk-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Expression": "100 * (used/(used+free))",
            "Id": "expr_1",
            "Label": "Disk Usage",
          },
          Object {
            "Id": "used",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterUsedSpace",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Sum",
            },
            "ReturnData": false,
          },
          Object {
            "Id": "free",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "FreeStorageSpace",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Sum",
            },
            "ReturnData": false,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainIndexingLatencyP50Warning4629A5C1": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P50 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Indexing-Latency-P50-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 10,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P50",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p50",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 500,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainIndexingLatencyP90Warning2D4361B7": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P90 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Indexing-Latency-P90-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P90",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p90",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 600,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainIndexingLatencyP99Warning8A959843": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P99 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Indexing-Latency-P99-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P99",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p99",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 700,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainMasterCPUUsageWarning53AA8C84": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The master CPU usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Master-CPU-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Master CPU Usage",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "MasterCPUUtilization",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainMasterMemoryUsageWarning4A55B986": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The master memory usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Master-Memory-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Master JVM Memory Pressure",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "MasterJVMMemoryPressure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainMemoryUsageWarning361A5AB5": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The memory usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Memory-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "JVM Memory Pressure",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "JVMMemoryPressure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainSearchLatencyP50WarningD1217CC2": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P50 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Search-Latency-P50-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P50",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p50",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 500,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainSearchLatencyP90Warning7275DBE2": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P90 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Search-Latency-P90-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P90",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p90",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 600,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainSearchLatencyP99WarningCEDA6511": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P99 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Search-Latency-P99-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P99",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p99",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 700,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainCPUUsageWarning63505F51": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The CPU usage is too high.",
        "AlarmName": "Test-ElasticsearchDomain-CPU-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "CPU Usage",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "CPUUtilization",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterAutomatedSnapshotFailureWarningABA98F0A": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster automated snapshots are failing",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-AutomatedSnapshotFailure-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Automated Snapshot Failures",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "AutomatedSnapshotFailure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterClusterIndexWritesBlockedWarning094581FA": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster writes are blocked",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-ClusterIndexWritesBlocked-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Index Writes Blocked",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "ClusterIndexWriteBlocked",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterClusterStatusCriticalDB1ECD0F": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster is in red status",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-ClusterStatus-Critical",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Red",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "ClusterStatus.red",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterClusterStatusWarningEF9717EB": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster is in yellow status",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-ClusterStatus-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Yellow",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "ClusterStatus.yellow",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterKMSKeyErrorWarning36F7FED3": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster KMS keys are throwing errors",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-KMSKeyError-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "KMS Key Error",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "KMSKeyError",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterKMSKeyInaccessibleWarningB8CECCEC": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster KMS keys are inaccessible",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-KMSKeyInaccessible-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "KMS Key Inaccessible",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "KMSKeyInaccessible",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterNodesWarningEF4351DC": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster node count is too low",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-Nodes-Warning",
        "ComparisonOperator": "LessThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Nodes",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "Nodes",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Minimum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainDiskUsageWarning92263379": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The disk usage is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Disk-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Expression": "100 * (used/(used+free))",
            "Id": "expr_1",
            "Label": "Disk Usage",
          },
          Object {
            "Id": "used",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "ClusterUsedSpace",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Sum",
            },
            "ReturnData": false,
          },
          Object {
            "Id": "free",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "FreeStorageSpace",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Sum",
            },
            "ReturnData": false,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainIndexingLatencyP50Warning3E2E0FB5": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P50 latency is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Indexing-Latency-P50-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 10,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P50",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p50",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 500,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainIndexingLatencyP90Warning7FD7AA70": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P90 latency is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Indexing-Latency-P90-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P90",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p90",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 600,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainIndexingLatencyP99Warning503BE88C": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P99 latency is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Indexing-Latency-P99-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P99",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p99",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 700,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainMasterCPUUsageWarning48384FF1": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The master CPU usage is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Master-CPU-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Master CPU Usage",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "MasterCPUUtilization",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainMasterMemoryUsageWarning63F270E0": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The master memory usage is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Master-Memory-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Master JVM Memory Pressure",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "MasterJVMMemoryPressure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainMemoryUsageWarning9FFB6169": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The memory usage is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Memory-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "JVM Memory Pressure",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "JVMMemoryPressure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainSearchLatencyP50WarningDF00279F": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P50 latency is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Search-Latency-P50-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P50",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p50",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 500,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainSearchLatencyP90WarningE168C209": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P90 latency is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Search-Latency-P90-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P90",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p90",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 600,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainSearchLatencyP99Warning537E3AF4": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P99 latency is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Search-Latency-P99-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P99",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p99",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 700,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
  },
}
`;

exports[`snapshot test: no alarms for OpenSearchDomain 1`] = `
Object {
  "Resources": Object {
    "ElasticsearchCfnDomain": Object {
      "Properties": Object {
        "DomainName": "ElasticsearchCfnDomain",
      },
      "Type": "AWS::Elasticsearch::Domain",
    },
    "ElasticsearchDomain54566C07": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "CognitoOptions": Object {
          "Enabled": false,
        },
        "DomainEndpointOptions": Object {
          "EnforceHTTPS": false,
          "TLSSecurityPolicy": "Policy-Min-TLS-1-0-2019-07",
        },
        "DomainName": "ElasticsearchDomain",
        "EBSOptions": Object {
          "EBSEnabled": true,
          "VolumeSize": 10,
          "VolumeType": "gp2",
        },
        "ElasticsearchClusterConfig": Object {
          "DedicatedMasterEnabled": false,
          "InstanceCount": 1,
          "InstanceType": "r5.large.elasticsearch",
          "ZoneAwarenessEnabled": false,
        },
        "ElasticsearchVersion": "7.7",
        "EncryptionAtRestOptions": Object {
          "Enabled": false,
        },
        "LogPublishingOptions": Object {},
        "NodeToNodeEncryptionOptions": Object {
          "Enabled": false,
        },
      },
      "Type": "AWS::Elasticsearch::Domain",
      "UpdateReplacePolicy": "Retain",
    },
    "OpenSearchCfnDomain": Object {
      "Properties": Object {
        "DomainName": "OpenSearchCfnDomain",
      },
      "Type": "AWS::OpenSearchService::Domain",
    },
    "OpenSearchDomain85D65221": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "ClusterConfig": Object {
          "DedicatedMasterEnabled": false,
          "InstanceCount": 1,
          "InstanceType": "r5.large.search",
          "ZoneAwarenessEnabled": false,
        },
        "CognitoOptions": Object {
          "Enabled": false,
        },
        "DomainEndpointOptions": Object {
          "EnforceHTTPS": false,
          "TLSSecurityPolicy": "Policy-Min-TLS-1-0-2019-07",
        },
        "DomainName": "OpenSearchDomain",
        "EBSOptions": Object {
          "EBSEnabled": true,
          "VolumeSize": 10,
          "VolumeType": "gp2",
        },
        "EncryptionAtRestOptions": Object {
          "Enabled": false,
        },
        "EngineVersion": "OpenSearch_1.0",
        "LogPublishingOptions": Object {},
        "NodeToNodeEncryptionOptions": Object {
          "Enabled": false,
        },
      },
      "Type": "AWS::OpenSearchService::Domain",
      "UpdateReplacePolicy": "Retain",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainCPUUsageWarning3F505546": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The CPU usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-CPU-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "CPU Usage",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "CPUUtilization",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterAutomatedSnapshotFailureWarningF2CE7D6D": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster automated snapshots are failing",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-AutomatedSnapshotFailure-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Automated Snapshot Failures",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "AutomatedSnapshotFailure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterClusterIndexWritesBlockedWarningC18EC120": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster writes are blocked",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-ClusterIndexWritesBlocked-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Index Writes Blocked",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterIndexWriteBlocked",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterClusterStatusCritical5F5B57FC": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster is in red status",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-ClusterStatus-Critical",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Red",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterStatus.red",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterClusterStatusWarning2F619B10": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster is in yellow status",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-ClusterStatus-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Yellow",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterStatus.yellow",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterKMSKeyErrorWarning01FB42D1": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster KMS keys are throwing errors",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-KMSKeyError-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "KMS Key Error",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "KMSKeyError",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterKMSKeyInaccessibleWarning4740A40D": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster KMS keys are inaccessible",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-KMSKeyInaccessible-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "KMS Key Inaccessible",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "KMSKeyInaccessible",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainClusterNodesWarning6819B10A": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster node count is too low",
        "AlarmName": "Test-ElasticsearchCfnDomain-Cluster-Nodes-Warning",
        "ComparisonOperator": "LessThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Nodes",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "Nodes",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Minimum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainDiskUsageWarningAC0BBA9D": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The disk usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Disk-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Expression": "100 * (used/(used+free))",
            "Id": "expr_1",
            "Label": "Disk Usage",
          },
          Object {
            "Id": "used",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterUsedSpace",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Sum",
            },
            "ReturnData": false,
          },
          Object {
            "Id": "free",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "FreeStorageSpace",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Sum",
            },
            "ReturnData": false,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainIndexingLatencyP50Warning4629A5C1": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P50 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Indexing-Latency-P50-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 10,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P50",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p50",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 500,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainIndexingLatencyP90Warning2D4361B7": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P90 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Indexing-Latency-P90-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P90",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p90",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 600,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainIndexingLatencyP99Warning8A959843": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P99 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Indexing-Latency-P99-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P99",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p99",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 700,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainMasterCPUUsageWarning53AA8C84": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The master CPU usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Master-CPU-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Master CPU Usage",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "MasterCPUUtilization",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainMasterMemoryUsageWarning4A55B986": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The master memory usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Master-Memory-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Master JVM Memory Pressure",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "MasterJVMMemoryPressure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainMemoryUsageWarning361A5AB5": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The memory usage is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Memory-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "JVM Memory Pressure",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "JVMMemoryPressure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainSearchLatencyP50WarningD1217CC2": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P50 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Search-Latency-P50-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P50",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p50",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 500,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainSearchLatencyP90Warning7275DBE2": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P90 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Search-Latency-P90-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P90",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p90",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 600,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchCfnDomainTestElasticsearchCfnDomainSearchLatencyP99WarningCEDA6511": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P99 latency is too high.",
        "AlarmName": "Test-ElasticsearchCfnDomain-Search-Latency-P99-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P99",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "ElasticsearchCfnDomain",
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p99",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 700,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainCPUUsageWarning63505F51": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The CPU usage is too high.",
        "AlarmName": "Test-ElasticsearchDomain-CPU-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "CPU Usage",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "CPUUtilization",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterAutomatedSnapshotFailureWarningABA98F0A": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster automated snapshots are failing",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-AutomatedSnapshotFailure-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Automated Snapshot Failures",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "AutomatedSnapshotFailure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterClusterIndexWritesBlockedWarning094581FA": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster writes are blocked",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-ClusterIndexWritesBlocked-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Index Writes Blocked",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "ClusterIndexWriteBlocked",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterClusterStatusCriticalDB1ECD0F": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster is in red status",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-ClusterStatus-Critical",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Red",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "ClusterStatus.red",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterClusterStatusWarningEF9717EB": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster is in yellow status",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-ClusterStatus-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Yellow",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "ClusterStatus.yellow",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterKMSKeyErrorWarning36F7FED3": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster KMS keys are throwing errors",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-KMSKeyError-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "KMS Key Error",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "KMSKeyError",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterKMSKeyInaccessibleWarningB8CECCEC": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster KMS keys are inaccessible",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-KMSKeyInaccessible-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "KMS Key Inaccessible",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "KMSKeyInaccessible",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainClusterNodesWarningEF4351DC": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster node count is too low",
        "AlarmName": "Test-ElasticsearchDomain-Cluster-Nodes-Warning",
        "ComparisonOperator": "LessThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Nodes",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "Nodes",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Minimum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainDiskUsageWarning92263379": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The disk usage is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Disk-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Expression": "100 * (used/(used+free))",
            "Id": "expr_1",
            "Label": "Disk Usage",
          },
          Object {
            "Id": "used",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "ClusterUsedSpace",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Sum",
            },
            "ReturnData": false,
          },
          Object {
            "Id": "free",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "FreeStorageSpace",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Sum",
            },
            "ReturnData": false,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainIndexingLatencyP50Warning3E2E0FB5": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P50 latency is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Indexing-Latency-P50-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 10,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P50",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p50",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 500,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainIndexingLatencyP90Warning7FD7AA70": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P90 latency is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Indexing-Latency-P90-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P90",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p90",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 600,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainIndexingLatencyP99Warning503BE88C": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P99 latency is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Indexing-Latency-P99-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P99",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p99",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 700,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainMasterCPUUsageWarning48384FF1": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The master CPU usage is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Master-CPU-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Master CPU Usage",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "MasterCPUUtilization",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainMasterMemoryUsageWarning63F270E0": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The master memory usage is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Master-Memory-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Master JVM Memory Pressure",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "MasterJVMMemoryPressure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainMemoryUsageWarning9FFB6169": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The memory usage is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Memory-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "JVM Memory Pressure",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "JVMMemoryPressure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainSearchLatencyP50WarningDF00279F": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P50 latency is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Search-Latency-P50-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P50",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p50",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 500,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainSearchLatencyP90WarningE168C209": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P90 latency is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Search-Latency-P90-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P90",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p90",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 600,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsElasticsearchDomainTestElasticsearchDomainSearchLatencyP99Warning537E3AF4": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P99 latency is too high.",
        "AlarmName": "Test-ElasticsearchDomain-Search-Latency-P99-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P99",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": Object {
                      "Ref": "ElasticsearchDomain54566C07",
                    },
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p99",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 700,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainCPUUsageWarning94256006": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The CPU usage is too high.",
        "AlarmName": "Test-OpenSearchCfnDomain-CPU-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "CPU Usage",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "CPUUtilization",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainClusterAutomatedSnapshotFailureWarning1DCD0EA2": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster automated snapshots are failing",
        "AlarmName": "Test-OpenSearchCfnDomain-Cluster-AutomatedSnapshotFailure-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Automated Snapshot Failures",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "AutomatedSnapshotFailure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainClusterClusterIndexWritesBlockedWarning65B2AB5B": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster writes are blocked",
        "AlarmName": "Test-OpenSearchCfnDomain-Cluster-ClusterIndexWritesBlocked-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Index Writes Blocked",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterIndexWriteBlocked",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainClusterClusterStatusCritical059C064E": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster is in red status",
        "AlarmName": "Test-OpenSearchCfnDomain-Cluster-ClusterStatus-Critical",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Red",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterStatus.red",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainClusterClusterStatusWarning09D70514": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster is in yellow status",
        "AlarmName": "Test-OpenSearchCfnDomain-Cluster-ClusterStatus-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Yellow",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterStatus.yellow",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainClusterKMSKeyErrorWarning1808FF19": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster KMS keys are throwing errors",
        "AlarmName": "Test-OpenSearchCfnDomain-Cluster-KMSKeyError-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "KMS Key Error",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "KMSKeyError",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainClusterKMSKeyInaccessibleWarning8E2DC83F": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster KMS keys are inaccessible",
        "AlarmName": "Test-OpenSearchCfnDomain-Cluster-KMSKeyInaccessible-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "KMS Key Inaccessible",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "KMSKeyInaccessible",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainClusterNodesWarning37FD30F7": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "Cluster node count is too low",
        "AlarmName": "Test-OpenSearchCfnDomain-Cluster-Nodes-Warning",
        "ComparisonOperator": "LessThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Nodes",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "Nodes",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Minimum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "breaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainDiskUsageWarningD082AB81": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The disk usage is too high.",
        "AlarmName": "Test-OpenSearchCfnDomain-Disk-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Expression": "100 * (used/(used+free))",
            "Id": "expr_1",
            "Label": "Disk Usage",
          },
          Object {
            "Id": "used",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "ClusterUsedSpace",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Sum",
            },
            "ReturnData": false,
          },
          Object {
            "Id": "free",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "FreeStorageSpace",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Sum",
            },
            "ReturnData": false,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainIndexingLatencyP50Warning888D3E68": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P50 latency is too high.",
        "AlarmName": "Test-OpenSearchCfnDomain-Indexing-Latency-P50-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 10,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P50",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p50",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 500,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainIndexingLatencyP90WarningB9242B4F": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P90 latency is too high.",
        "AlarmName": "Test-OpenSearchCfnDomain-Indexing-Latency-P90-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P90",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p90",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 600,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainIndexingLatencyP99WarningA5B0056B": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P99 latency is too high.",
        "AlarmName": "Test-OpenSearchCfnDomain-Indexing-Latency-P99-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P99",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "IndexingLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p99",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 700,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainMasterCPUUsageWarningE70151EA": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The master CPU usage is too high.",
        "AlarmName": "Test-OpenSearchCfnDomain-Master-CPU-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Master CPU Usage",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "MasterCPUUtilization",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainMasterMemoryUsageWarning3E9CC2E9": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The master memory usage is too high.",
        "AlarmName": "Test-OpenSearchCfnDomain-Master-Memory-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "Master JVM Memory Pressure",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "MasterJVMMemoryPressure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainMemoryUsageWarning8BDAC219": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "The memory usage is too high.",
        "AlarmName": "Test-OpenSearchCfnDomain-Memory-Usage-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "JVM Memory Pressure",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "JVMMemoryPressure",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "Maximum",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 80,
        "TreatMissingData": "missing",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainSearchLatencyP50WarningEE56A5F5": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P50 latency is too high.",
        "AlarmName": "Test-OpenSearchCfnDomain-Search-Latency-P50-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P50",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p50",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 500,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainSearchLatencyP90Warning1FF93CA1": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P90 latency is too high.",
        "AlarmName": "Test-OpenSearchCfnDomain-Search-Latency-P90-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P90",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p90",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 600,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "ScopeAllAlarmsOpenSearchCfnDomainTestOpenSearchCfnDomainSearchLatencyP99Warning2E9978CD": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmDescription": "P99 latency is too high.",
        "AlarmName": "Test-OpenSearchCfnDomain-Search-Latency-P99-Warning",
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 3,
        "EvaluationPeriods": 3,
        "Metrics": Array [
          Object {
            "Id": "m1",
            "Label": "P99",
            "MetricStat": Object {
              "Metric": Object {
                "Dimensions": Array [
                  Object {
                    "Name": "ClientId",
                    "Value": Object {
                      "Ref": "AWS::AccountId",
                    },
                  },
                  Object {
                    "Name": "DomainName",
                    "Value": "OpenSearchCfnDomain",
                  },
                ],
                "MetricName": "SearchLatency",
                "Namespace": "AWS/ES",
              },
              "Period": 300,
              "Stat": "p99",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 700,
        "TreatMissingData": "notBreaching",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
  },
}
`;
